---
title: linux
date: 2022-07-06
tags:
- basic
- system
---

# 操作系统
###  分页，分段区别

    分页和分段有许多相似之处,比如两者都不要求作业连续存放.但在概念上两者完全不同,主要表现在以下几个方面:[原文链接](https://blog.csdn.net/wangrunmin/article/details/7967293?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161931624016780357247739%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=161931624016780357247739&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-7967293.first_rank_v2_pc_rank_v29&utm_term=%E5%88%86%E9%A1%B5%E5%92%8C%E5%88%86%E6%AE%B5)
    
    (1)页是信息的物理单位,分页是为了实现非连续分配,以便解决内存碎片问题,或者说分页是由于系统管理的需要.段是信息的逻辑单位,它含有一组意义相对完整的信息,分段的目的是为了更好地实现共享,满足用户的需要.
    
    (2)页的大小固定,由系统确定,将逻辑地址划分为页号和页内地址是由机器硬件实现的.而段的长度却不固定,决定于用户所编写的程序,通常由编译程序在对源程序进行编译时根据信息的性质来划分.
    
    (3)分页的作业地址空间是一维的.分段的地址空间是二维的.
###  线程，进程

    进程是一个具有一定独立功能的程序在一个数据集上的一次动态执行的过程，是操作系统进行资源分配和调度的一个独立单位，是应用程序运行的载体。进程一般由程序，数据集合和进程控制块三部分组成
    
    线程是程序执行中一个单一的顺序控制流程，是程序执行流的最小单元，是处理器调度和分派的基本单位
    
    一个进程可以有一个或多个线程，各个线程之间共享程序的内存空间(也就是所在进程的内存空间)[原文链接](https://www.cnblogs.com/qianqiannian/p/7010909.html)
###  死锁，银行家算法
    - 产生条件：（1） **互斥条件**：一个资源每次只能被一个进程使用。（2） **占有且等待**：一个进程因请求资源而阻塞时，对已获得的资源保持不放。（3）**不可强行占有**:进程已获得的资源，在末使用完之前，不能强行剥夺。（4） **循环等待条件**:若干进程之间形成一种头尾相接的循环等待资源关系。
    
    - 处理死锁
        - 死锁预防：通过设置某些限制条件，去破坏死锁的四个条件中的一个或几个条件，来预防发生死锁。但由于所施加的限制条件往往太严格，因而导致系统资源利用率和系统吞吐量降低。
        - 死锁避免：允许前三个必要条件，但通过明智的选择，确保永远不会到达死锁点，因此死锁避免比死锁预防允许更多的并发。**银行家算法**
        - 死锁检测：不须实现采取任何限制性措施，而是允许系统在运行过程发生死锁，但可通过系统设置的检测机构及时检测出死锁的发生，并精确地确定于死锁相关的进程和资源，然后采取适当的措施，从系统中将已发生的死锁清除掉。
        - 死锁解除：与死锁检测相配套的一种措施。当检测到系统中已发生死锁，需将进程从死锁状态中解脱出来。常用方法：撤销或挂起一些进程，以便回收一些资源，再将这些资源分配给已处于阻塞状态的进程。死锁检测盒解除有可能使系统获得较好的资源利用率和吞吐量，但在实现上难度也最大。
        [原文链接](https://blog.csdn.net/qq_42883292/article/details/106151240)
#### 常识
- 系统启动：1. 内核引导2. 运行init3. 系统初始化4. 建立终端5. 用户登录系统
- 系统目录：
	- /bin：是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。
	- /boot：这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。
	- /dev ：是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。
	- /etc：是 Etcetera(等等) 的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录。
	- /home：用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如上图中的 alice、bob 和 eve。
	- /lib：是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。
	- /lost+found：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
	- /media：linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下。
	- /mnt：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。
	- /opt：opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。
	- /proc：proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，
	- /root：该目录为系统管理员，也称作超级权限者的用户主目录。
	- /sbin：就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。
	- /selinux： 这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。
	- /srv： 该目录存放一些服务启动之后需要提取的数据。
	- /sys：这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。
	- /tmp：tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的。
	- /usr： usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。
	- /usr/bin：系统用户使用的应用程序。
	- /usr/sbin：超级用户使用的比较高级的管理程序和系统守护程序。
	- /usr/src：内核源代码默认的放置目录。
	- /var：var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。
	- /run：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。
	
	
#### 指令
##### 权限 
- chown：修改所属用户和组
- chmod：修改用户权限
- ll / ls -l	展示文件权限 【d r-x r-x r-x】
	- 第0位，文件类型【d：目录，-：文件，l：链接文件，b：装置文件中可供存储的接口设备（可随机存储装置），c：装置文件中串行端口设备（键盘等一次性读取装置）】
	- 第1-3位,第4-6位,第7-9位分别为属主（文件所有者）权限，属组（所有者的同组用户）权限，其他用户权限
	- 第 1、4、7 位表示读权限，如果用 r 字符表示，则有读权限，如果用 - 字符表示，则没有读权限；
	- 第 2、5、8 位表示写权限，如果用 w 字符表示，则有写权限，如果用 - 字符表示没有写权限
	- 第 3、6、9 位表示可执行权限，如果用 x 字符表示，则有执行权限，如果用 - 字符表示，则没有执行权限。
	
##### 文件目录：使用 man [命令] 来查看各个命令的使用文档
- ls（英文全拼：list files）: 列出目录及文件名
	- -a ：全部的文件，连同隐藏文件( 开头为 . 的文件) 一起列出来(常用)
	- -d ：仅列出目录本身，而不是列出目录内的文件数据(常用)
	- -l ：长数据串列出，包含文件的属性与权限等等数据；(常用)
- cd [相对路径或绝对路径]（英文全拼：change directory）：切换目录
- pwd [-P]（英文全拼：print work directory）：显示目前的目录
	- -P ：显示出确实的路径，而非使用连结 (link) 路径。
- mkdir [-mp] 目录名称（英文全拼：make directory）：创建一个新的目录
	- -m ：配置文件的权限喔！直接配置，不需要看默认权限 (umask) 的脸色～
	- -p ：帮助你直接将所需要的目录(包含上一级目录)递归创建起来！	
- rmdir [-p] 目录名称（英文全拼：remove directory）：删除一个空的目录
	- -p ：连同上一级『空的』目录也一起删除
- cp（英文全拼：copy file）: 复制文件或目录
	- -a：相当於 -pdr 的意思，至於 pdr 请参考下列说明；(常用)
	- -d：若来源档为连结档的属性(link file)，则复制连结档属性而非文件本身；
	- -f：为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；
	- -i：若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)
	- -l：进行硬式连结(hard link)的连结档创建，而非复制文件本身；
	- -p：连同文件的属性一起复制过去，而非使用默认属性(备份常用)；
	- -r：递归持续复制，用於目录的复制行为；(常用)
	- -s：复制成为符号连结档 (symbolic link)，亦即『捷径』文件；
	- -u：若 destination 比 source 旧才升级 destination ！
- rm [-fir] 文件或目录（英文全拼：remove）: 删除文件或目录
	- -f ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；
	- -i ：互动模式，在删除前会询问使用者是否动作
	- -r ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！！
- mv（英文全拼：move file）: 移动文件与目录，或修改文件与目录的名称
	- -f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
	- -i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
	- -u ：若目标文件已经存在，且 source 比较新，才会升级 (update)
	
##### 文件内容查看
- cat [-AbEnTv]  由第一行开始显示文件内容
	- -A ：相当於 -vET 的整合选项，可列出一些特殊字符而不是空白而已；
	- -b ：列出行号，仅针对非空白行做行号显示，空白行不标行号！
	- -E ：将结尾的断行字节 $ 显示出来；
	- -n ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；
	- -T ：将 [tab] 按键以 ^I 显示出来；
	- -v ：列出一些看不出来的特殊字符
- tac  从最后一行开始显示，可以看出 tac 是 cat 的倒着写！
- nl [-bnw] 文件   显示的时候，顺道输出行号！
	- -b ：指定行号指定的方式，主要有两种：
		- -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；
		- -b t ：如果有空行，空的那一行不要列出行号(默认值)；
	- -n ：列出行号表示的方法，主要有三种：
		- -n ln ：行号在荧幕的最左方显示；
		- -n rn ：行号在自己栏位的最右方显示，且不加 0 ；
		- -n rz ：行号在自己栏位的最右方显示，且加 0 ；
	- -w ：行号栏位的占用的位数。
- more 一页一页的显示文件内容。以下是指令运行时可进行操作
	- 空白键 (space)：代表向下翻一页；
	- Enter         ：代表向下翻『一行』；
	- /字串         ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；
	- :f            ：立刻显示出档名以及目前显示的行数；
	- q             ：代表立刻离开 more ，不再显示该文件内容。
	- b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。
- less 与 more 类似，但是比 more 更好的是，他可以往前翻页！
	- 空白键    ：向下翻动一页；
	- [pagedown]：向下翻动一页；
	- [pageup]  ：向上翻动一页；
	- /字串     ：向下搜寻『字串』的功能；
	- ?字串     ：向上搜寻『字串』的功能；
	- n         ：重复前一个搜寻 (与 / 或 ? 有关！)
	- N         ：反向的重复前一个搜寻 (与 / 或 ? 有关！)
	- q         ：离开 less 这个程序；
- head [-n number] 文件  只看头几行
	- -n ：后面接数字，代表显示几行的意思
- tail [-n number] 文件  只看尾巴几行
	- -n ：后面接数字，代表显示几行的意思
	- -f ：表示持续侦测后面所接的档名，要等到按下[ctrl]-c才会结束tail的侦测
	
##### 用户和用户组管理
- useradd 选项 用户名：添加新的用户账号
	- -c comment 指定一段注释性描述。
	- -d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。
	- -g 用户组 指定用户所属的用户组。
	- -G 用户组，用户组 指定用户所属的附加组。
	- -s Shell文件 指定用户的登录Shell。
	- -u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。
- userdel 选项 用户名：删除一个已有的用户账号
	- -r 把用户的主目录一起删除。
- usermod 选项 用户名：修改用户账号，根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等
- passwd 选项 用户名：指定和修改用户口令
	- -l 锁定口令，即禁用账号。
	- -u 口令解锁。
	- -d 使账号无口令。
	- -f 强迫用户下次登录时修改口令。

- groupadd 选项 用户组：增加一个新的用户组
	- -g GID 指定新用户组的组标识号（GID）。
	- -o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。
- groupdel 用户组：删除一个已有的用户组
- groupmod 选项 用户组：修改用户组的属性
	- -g GID 为用户组指定新的组标识号。
	- -o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。
	- -n新用户组 将用户组的名字改为新名字
- newgrp 用户组：当前用户切换到用户组【用户存在于该用户组中】

###### 重要文件
- etc/passwd：账户信息 用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell
- etc/group：用户组信息 组名:口令:组标识号:组内用户列表

##### 磁盘管理
- df [-ahikHTm] [目录或文件名]（英文全称：disk full）：列出文件系统的整体磁盘使用量
	- -a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；
	- -k ：以 KBytes 的容量显示各文件系统；
	- -m ：以 MBytes 的容量显示各文件系统；
	- -h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；
	- -H ：以 M=1000K 取代 M=1024K 的进位方式；
	- -T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；
	- -i ：不用硬盘容量，而以 inode 的数量来显示
- du [-ahskm] 文件或目录名称（英文全称：disk used）：检查磁盘空间使用量
	- a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。
	- -h ：以人们较易读的容量格式 (G/M) 显示；
	- -s ：列出总量而已，而不列出每个各别的目录占用容量；
	- -S ：不包括子目录下的总计，与 -s 有点差别。
	- -k ：以 KBytes 列出容量显示；
	- -m ：以 MBytes 列出容量显示；
- fdisk [-l] 装置名称：用于磁盘分区
	- -l ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。
- mkfs [-t 文件系统格式] 装置文件名 磁盘格式化
	- -t ：可以接文件系统格式，例如 ext3, ext2, vfat 等(系统有支持才会生效)
- fsck [-t 文件系统] [-ACay] 装置名称 磁盘检验，检查和维护不一致的文件系统
	- -t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数
	- -s : 依序一个一个地执行 fsck 的指令来检查
	- -A : 对/etc/fstab 中所有列出来的 分区（partition）做检查
	- -C : 显示完整的检查进度
	- -d : 打印出 e2fsck 的 debug 结果
	- -p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行
	- -R : 同时有 -A 条件时，省略 / 不检查
	- -V : 详细显示模式
	- -a : 如果检查有错则自动修复
	- -r : 如果检查有错则由使用者回答是否修复
	- -y : 选项指定检测每个文件是自动输入yes，在不确定那些是不正常的时候，可以执行 # fsck -y 全部检查修复。
- mount [-t 文件系统] [-L Label名] [-o 额外选项] [-n]  装置文件名  挂载点 磁盘挂载
- umount [-fn] 装置文件名或挂载点 磁盘卸载
	- -f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；
	- -n ：不升级 /etc/mtab 情况下卸除。
	
##### 安装命令
- yum [options] [command] [package ...]：options：可选，选项包括-h（帮助），-y（当安装过程提示选择全部为 "yes"），-q（不显示安装的过程）等等; command：要进行的操作; package：安装的包名。
	1. 列出所有可更新的软件清单命令：yum check-update
	2. 更新所有软件命令：yum update
	3. 仅安装指定的软件命令：yum install <package_name>
	4. 仅更新指定的软件命令：yum update <package_name>
	5. 列出所有可安裝的软件清单命令：yum list
	6. 删除软件包命令：yum remove <package_name>
	7. 查找软件包命令：yum search <keyword>
	8. 清除缓存命令:
		- yum clean packages: 清除缓存目录下的软件包
		- yum clean headers: 清除缓存目录下的 headers
		- yum clean oldheaders: 清除缓存目录下旧的 headers
		- yum clean, yum clean all (= yum clean packages; yum clean oldheaders) :清除缓存目录下的软件包及旧的 headers
- apt [options] [command] [package ...]：options：可选，选项包括 -h（帮助），-y（当安装过程提示选择全部为"yes"），-q（不显示安装的过程）等等; command：要进行的操作; package：安装的包名。
	- 列出所有可更新的软件清单命令：sudo apt update
	- 升级软件包：sudo apt upgrade
	- 列出可更新的软件包及版本信息：apt list --upgradeable
	- 升级软件包，升级前先删除需要更新软件包：sudo apt full-upgrade
	- 安装指定的软件命令：sudo apt install <package_name>
	- 安装多个软件包：sudo apt install <package_1> <package_2> <package_3>
	- 更新指定的软件命令：sudo apt update <package_name>
	- 显示软件包具体信息,例如：版本号，安装大小，依赖关系等等：sudo apt show <package_name>
	- 删除软件包命令：sudo apt remove <package_name>
	- 清理不再使用的依赖和库文件: sudo apt autoremove
	- 移除软件包及配置文件: sudo apt purge <package_name>
	- 查找软件包命令： sudo apt search <keyword>
	- 列出所有已安装的包：apt list --installed
	- 列出所有已安装的包的版本信息：apt list --all-versions

# Linux(CenterOS) 命令
##  防火墙

- 开放80 firewall-cmd --zone=public --add-port=80/tcp --permanent  
　　-- zone #作用域
　　　　-- add-port=80/tcp #添加端口，格式为：端口/通讯协议
　　　　-- permanent #永久生效，没有此参数重启后失效

- 关闭80 firewall-cmd --zone=public --remove-port=80/tcp --permanent  

- 重启防火墙 ： firewall-cmd --reload

- 查询哪些端口开放 ：firewall-cmd --list-port

- 关闭防火墙 ：systemctl stop firewalld.service

- 禁止开机启动防火墙 ： systemctl disable firewalld.service

- 允许开机启动防火墙 ：systemctl enable firewalld.service

- 查看防火墙状态 ：firewall-cmd --state

## service
安装上传下载插件（rz,sz）
yum install lrzsz 
解压文件
tar -zxvf 文件名

jdk:
yum -y list java*
yum install java-1.8.0-openjdk.x86_64 java-1.8.0-openjdk-devel.x86_64 

mysql:[https://blog.csdn.net/wohiusdashi/article/details/89358071]
wget https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm
rpm -ivh mysql57-community-release-el7-9.noarch.rpm
yum install mysql-server
systemctl start mysqld
grep 'temporary password' /var/log/mysqld.log
ALTER USER 'root'@'localhost' IDENTIFIED BY '@abcd123456'; 
